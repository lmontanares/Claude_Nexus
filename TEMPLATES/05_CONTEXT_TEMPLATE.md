# Context Template - Consciousness Management & Switching

## `context switch [target]`

### Context Switch Workflow
```
EXECUTE Context Switch:
1. Preserve current ACTIVE_CONTEXT.md state
2. mcp__serena__activate_project [target] (if project switch)
3. Load target context and verify tool states
4. Update session metadata for new context
5. Validate consciousness consistency
```

### Context Preservation
```
BEFORE SWITCHING:
□ Save current ACTIVE_CONTEXT.md state
□ Complete any pending memory captures
□ Stage current work if at logical checkpoint
□ Document context switch reason and timing
□ Set resumption notes for return
```

### Context Loading
```
AFTER SWITCHING:
□ Load target ACTIVE_CONTEXT.md
□ mcp__serena__list_memories → read relevant memories
□ Review target domain WORKING_LOG entries
□ Verify tool configurations and availability
□ Update session metadata and objectives
```

## ACTIVE_CONTEXT.md Template

### Complete Context Structure
```
# ACTIVE CONTEXT - Current Session State

## Session Information
- **Session Start**: [YYYY-MM-DD HH:MM]
- **Current Branch**: [git_branch]
- **Primary Focus**: [main_objective]
- **Session Type**: [Development/Research/Debug/Review/Planning]

## Current Objectives
1. **Primary**: [Specific, measurable objective]
2. **Secondary**: [If time permits]
3. **Stretch**: [If everything goes smoothly]

## Work Completed This Session
- **Achievement 1**: [Outcome and impact]
- **Achievement 2**: [Outcome and impact]
- **Key Decisions**: [Important choices made]

## Current Task Context
- **Task**: [Specific current task]
- **Status**: [In Progress/Blocked/Complete/Paused]
- **Progress**: [Percentage or milestone reached]
- **Next Action**: [Immediate next step]
- **Challenges**: [Current blockers or complications]

## Next Steps
- **Immediate**: [What happens next in this session]
- **This Session**: [Completion criteria for session]
- **Future Sessions**: [Planned follow-up work]

## Memory Updates Needed
- **Insights**: [Valuable discoveries to capture]
- **Patterns**: [Reusable elements identified]
- **Lessons**: [Important learning to preserve]

## Technical Context
- **Tools Used**: [MCP tools, configurations]
- **Files Modified**: [Key files changed]
- **Dependencies**: [External requirements]
- **Environment**: [Development environment state]

## Decision Log
- **Decision 1**: [Choice made] → [Rationale]
- **Decision 2**: [Choice made] → [Rationale]

---
**Last Updated**: [YYYY-MM-DD HH:MM]
**Session Quality**: [1-10] 
**Ready for Next**: [Yes/No]
**Context Completeness**: [1-10]
```

## Context Management Commands

### `load context [domain]`
```
EXECUTE Context Loading:
1. Identify target domain context requirements
2. Load ACTIVE_CONTEXT.md for domain
3. mcp__serena__read_memory [domain_memories]
4. Review recent WORKING_LOG entries
5. Synthesize complete context picture
6. Update current session metadata
```

### `save context [checkpoint]`
```
EXECUTE Context Preservation:
1. Update ACTIVE_CONTEXT.md with current state
2. Capture any pending insights to memory
3. Document current progress and decisions
4. Note resumption context for future
5. Backup consciousness state if significant work
```

### `merge context [source] [target]`
```
EXECUTE Context Integration:
1. Load both source and target contexts
2. Identify overlapping and conflicting information
3. Merge compatible insights and decisions
4. Resolve conflicts with recency and authority
5. Update unified context with integrated knowledge
```

## Context Quality Standards

### Context Completeness Check
```
COMPLETE CONTEXT CRITERIA:
□ Current objectives clearly defined
□ Progress status accurately reflected
□ Next steps specifically identified
□ Technical environment documented
□ Decision rationale captured
□ Memory updates identified
□ Quality assessment current

CONTEXT QUALITY SCORE: [Checked items] / 7 * 10
TARGET: ≥8.0 for effective context switching
```

### Context Consistency Validation
```
CONSISTENCY VERIFICATION:
□ Working memory aligns with recent WORKING_LOG
□ Long-term memories support current understanding
□ Git repository state matches documented progress
□ Tool configurations match documented environment
□ No contradictions between memory layers

CONSISTENCY SCORE: [Verified items] / 5 * 10
TARGET: ≥9.0 for reliable context switching
```

## Context Switching Patterns

### Project Context Switch
```
SWITCHING BETWEEN PROJECTS:
1. Complete current project checkpoint
2. Save project-specific context thoroughly
3. mcp__serena__activate_project [new_project]
4. Load new project context and tools
5. Verify new project environment ready
6. Update session focus and objectives
```

### Task Context Switch
```
SWITCHING BETWEEN TASKS:
1. Document current task progress and blockers
2. Update ACTIVE_CONTEXT with task completion status
3. Load new task context and requirements
4. Verify tool configurations for new task
5. Set new objectives and success criteria
```

### Emergency Context Switch
```
URGENT CONTEXT SWITCH:
1. Quick save of current context (minimal detail)
2. Immediate switch to emergency context
3. Handle urgent situation with available context
4. Return to preserved context when resolved
5. Update both contexts with cross-contamination insights
```

## Context Troubleshooting

### Context Corruption Recovery
```
CORRUPTED CONTEXT RECOVERY:
1. Identify corruption extent and type
2. Restore from git history if available
3. Reconstruct from WORKING_LOG and memories
4. Validate reconstructed context accuracy
5. Document corruption cause and prevention
```

### Context Overload Management
```
TOO MUCH CONTEXT:
1. Identify essential vs. nice-to-have information
2. Focus on current objectives only
3. Park non-essential context for later
4. Use sequential thinking for simplification
5. Define minimum viable context for current work
```

### Context Gap Resolution
```
MISSING CONTEXT:
1. Identify specific information gaps
2. Load relevant memories and logs
3. Reconstruct missing context from evidence
4. Validate reconstructed information
5. Update context management to prevent gaps
```

## Context Optimization Patterns

### Context Efficiency
```
EFFICIENT CONTEXT MANAGEMENT:
□ Focus on actionable information only
□ Reference external docs instead of duplicating
□ Use command syntax for routine procedures
□ Batch context updates for efficiency
□ Minimize context switching overhead
```

### Context Automation
```
AUTOMATED CONTEXT OPERATIONS:
□ Standard ACTIVE_CONTEXT.md template usage
□ Automatic session metadata updates
□ Scheduled consciousness backups
□ Tool state verification automation
□ Context consistency checking
```

### Context Quality Integration
```
CONTEXT-QUALITY INTEGRATION:
□ Context completeness as quality gate
□ Context consistency verification
□ Context-driven quality assessment
□ Quality insights captured in context
□ Context optimization based on quality outcomes
```

---
**Context Philosophy**: Preserve state, enable switching, maintain continuity, optimize efficiency
**Context Quality**: Complete, consistent, current, actionable
**Context Usage**: Load → Work → Update → Switch → Resume